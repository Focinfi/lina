app.directive('jsonSchema', function(){
  return {
    restrict: 'E',
    scope: {
      schema: '='
    },
    link: function(scope, element, attrs){
      scope.isRequired = function(params, name){
        return params.required.indexOf(name) != -1;
      }

      scope.moreInfo = function(properties) {
        properties = _.clone(properties);
        ['type', 'description'].forEach(function(e){
          delete properties[e];
        })
        var info = '';
        _.keys(properties).forEach( function(k) {
          info = info + k + ": " + properties[k] + "\n";
        })
        return info;
      }
    },
    templateUrl: '<%= asset_path("templates/lina/schema.html") %>'
  };

})
